<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Internet Of Digital Design</title>
    <meta name="description" content="Language for CAD">
    <meta name="author" content="Selftie Software">

    <link href='css/font.css' rel='stylesheet' type='text/css'>
    <link href="css/font-awesome.css" rel="stylesheet" type='text/css'>

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">
    <link rel="stylesheet" href="css/codemirror.css">

    <link rel="icon" type="image/png" href="images/favicon.png"/>

    <!-- Piwik -->
    <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function () {
            var u = "//repocad.com/piwik/";
            _paq.push(['setTrackerUrl', u + 'piwik.php']);
            _paq.push(['setSiteId', 1]);
            var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
            g.type = 'text/javascript';
            g.async = true;
            g.defer = true;
            g.src = u + 'piwik.js';
            s.parentNode.insertBefore(g, s);
        })();
    </script>
    <noscript><p><img src="//repocad.com/piwik/piwik.php?idsite=1" style="border:0;" alt=""/></p></noscript>
    <!-- End Piwik Code -->
</head>
<body>

<style>
    #canvas {
        border: 1px solid #777;
    }
</style>

<div class="container" id="container">

    <!-- Header -->
    <div class="row">
        <div class="one column">
            <a href="/">
                <img src="images/repoCad_logo_NB.png" alt="RepoCad"
                     style="width:48px; height:37px; padding:0 0 0 10px;">
            </a>
        </div>
    </div>

    <!-- Canvas and editor -->
    <div class="row">

        <div class="six columns" id="editor">
            <label>
                Height:
                <input type="range" min="1" max="100" value="2" id="marginHeight"/>
                <span id="heightValue">2</span>mm
            </label>
            <label>Width
                <input type="range" min="1" max="100" value="6" id="marginWidth"/>
                <span id="widthValue">6</span>mm
            </label>
            <label>Text size
                <input type="range" min="3" max="100" value="6" id="textSize">
                <span id="textSizeValue">6</span>px
            </label>
            <label>
                Font

            </label>
            <label>Text
                <input type="text" placeholder="Input text" id="text" value="Hello world!"/>
            </label>

        </div>

        <div class="six columns">
            <canvas id="canvas"></canvas>
        </div>

    </div>

    <footer class="row" style="text-align: center">

        ||
        <a href="http://repocad.com/">home</a> ||
        <a href="https://twitter.com/repocad">news (twitter)</a> ||
        <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Frepocad.com%2F&display=popup&ref=plugin&src=share_button">share
            on facebook</a> ||
        <a href="http://repocad.com/reposcript">quick guide</a> ||
        <a href="https://github.com/repocad/lib">drawing library</a> ||
        <a href="https://github.com/repocad">source code</a> ||
        <a href="https://github.com/repocad/web/issues">known issues</a> ||
        <a href="https://github.com/repocad/web/wiki">about</a> ||
        <a href="http://aarch.dk/person/80003ada1922ad4ab7e5d16d99bb664d/">contact</a> ||

        </br>

        Copyright (c) Selftie Software, licensed under the open-source license <a
            href="https://github.com/repocad/web/blob/master/repocad_license_agreement.pdf?raw=true">GPL</a>.
    </footer>
</div>

<!-- Include Scala.js compiled code -->
<script type="text/javascript" src="web.js"></script>

<!-- Run tutorial.webapp.TutorialApp -->
<script type="text/javascript">

    var canvas = document.getElementById("canvas");
    var editorDiv = document.getElementById("editor");

    var sliderHeight = document.getElementById("marginHeight");
    var sliderWidth = document.getElementById("marginWidth");
    var textSize = document.getElementById("textSize");
    var textInput = document.getElementById("text");
    var heightValue = document.getElementById("heightValue");
    var widthValue = document.getElementById("widthValue");
    var textSizeValue = document.getElementById("textSizeValue");

    var editor = new EditorApp("sign", editorDiv);
    editor.withSlider(sliderWidth, "marginwidth");
    editor.withSlider(sliderHeight, "marginheight");
    editor.withSlider(textSize, "scale");
    editor.withText(textInput, "content");

    var view = new CanvasView(canvas, editor);

    var repocad = new Repocad(view, editor);

    canvas.width = container.offsetWidth / 2 - 20;
    canvas.height = window.innerHeight * 0.7;

    function MouseWheelHandler(e) {

        // cross-browser wheel delta
        var e = window.event || e; // old IE support
        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
        view.zoom(delta, e);

        // Stop scroll from happening
        if (e.preventDefault)
            e.preventDefault();
        return false;
    }

    if (canvas.addEventListener) {
        // IE9, Chrome, Safari, Opera
        canvas.addEventListener("mousewheel", MouseWheelHandler, false);
        // Firefox
        canvas.addEventListener("DOMMouseScroll", MouseWheelHandler, false);
    }

    window.onload = function (e) {
        repocad.init();

        sliderHeight.addEventListener("input", function (e) {
            heightValue.innerHTML = e.target.value;
        });
        sliderWidth.addEventListener("input", function (e) {
            widthValue.innerHTML = e.target.value;
        });
        textSize.addEventListener("input", function(e) {
            textSizeValue.innerHTML = e.target.value;
        });
//
//        var drawings = repocad.getDrawings();
//
//        for (var i in drawings) {
//            var e = new Option();
//            e.name = drawings[i];
//            e.value = drawings[i];
//            drawingTitles.appendChild(e);
//        }
//
//        toPdf.onclick = function (e) {
//            repocad.printPdf("IOD_2d_print.pdf");
//        }
//        toPng.onclick = function (e) {
//            var png = repocad.printPng();
//            var url = canvas.toDataURL("image/png");
//            var url2 = png.replace(/octet-stream/, 'png');
//            window.location.href = url;
//            console.log(png);
//        }
//
//        save.onclick = function (e) {
//            repocad.save();
//        }
    };
</script>
</body>
</html>